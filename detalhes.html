<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Asset Profile // Biosyn Genetics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;700&family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <style>
        .scanlines {
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1));
            background-size: 100% 4px;
            position: absolute; inset: 0; pointer-events: none; z-index: 10;
        }
        .crt-flicker { animation: flicker 0.15s infinite; }
        @keyframes flicker { 0% { opacity: 0.99; } 50% { opacity: 1; } 100% { opacity: 0.98; } }
        .bg-grid { background-image: linear-gradient(to right, #232f48 1px, transparent 1px), linear-gradient(to bottom, #232f48 1px, transparent 1px); background-size: 30px 30px; }
    </style>
</head>

<body class="bg-[#0c1018] text-white font-display overflow-x-hidden select-none">
    <div class="fixed inset-0 z-0 bg-grid opacity-10"></div>
    <div class="scanlines opacity-20"></div>

    <main class="relative z-20 min-h-screen p-4 md:p-10 flex flex-col items-center">
        <div class="w-full max-w-6xl mb-6 flex justify-between items-center">
            <a href="leilao.html" class="flex items-center gap-2 text-blue-500 hover:text-white transition-colors font-mono text-sm">
                <span class="material-symbols-outlined">arrow_back</span> VOLTAR AO INVENTÁRIO
            </a>
            <div class="bg-blue-900/20 border border-blue-500/30 px-4 py-2 rounded">
                <span class="text-[10px] text-blue-400 block font-mono uppercase">Saldo Disponível</span>
                <span id="user-balance" class="text-xl font-bold text-white font-mono">$ 100.000.000</span>
            </div>
        </div>

        <div class="w-full max-w-6xl bg-[#111722]/90 border border-blue-900/50 rounded-lg overflow-hidden crt-flicker shadow-2xl">
            <div class="grid grid-cols-1 lg:grid-cols-2">
                
                <div class="p-8 border-b lg:border-b-0 lg:border-r border-blue-900/30 bg-black/20">
                    <div class="relative group bg-slate-900/50 rounded flex items-center justify-center overflow-hidden">
                        <img id="dino-img" src="" alt="Asset" class="w-full h-[400px] object-contain grayscale opacity-60 hover:grayscale-0 hover:opacity-100 transition-all duration-700">
                        <div class="absolute bottom-4 right-4 bg-red-600 text-[10px] font-bold px-3 py-1 animate-pulse">
                            TOP SECRET // LEVEL 5
                        </div>
                    </div>

                    <div class="mt-8 space-y-4">
                        <h4 class="text-blue-500 font-mono text-xs tracking-widest uppercase">Análise de Sequenciamento DNA</h4>
                        <div class="bg-black/40 p-4 border border-blue-900/20 rounded">
                            <div class="flex justify-between mb-2">
                                <span class="text-[10px] text-slate-500 uppercase">Estabilidade Genética</span>
                                <span id="dino-stability" class="text-[10px] text-green-400">0%</span>
                            </div>
                            <div class="w-full bg-slate-800 h-1.5 rounded-full overflow-hidden">
                                <div id="dna-bar" class="bg-blue-600 h-full w-[0%] transition-all duration-1000"></div>
                            </div>
                            <p id="dino-dna" class="text-[10px] font-mono text-blue-300/60 mt-4 break-all italic">---</p>
                        </div>
                    </div>
                </div>

                <div class="p-8 flex flex-col">
                    <div class="mb-6">
                        <span id="dino-code" class="text-blue-500 font-mono text-xs">#ID_UNDEFINED</span>
                        <h1 id="dino-name" class="text-5xl font-black uppercase tracking-tighter mb-2 italic text-white">---</h1>
                        <div id="dino-tags" class="flex gap-2 mb-4"></div>
                    </div>

                    <div class="grid grid-cols-2 gap-4 mb-8">
                        <div class="border border-blue-900/20 p-3 bg-black/20">
                            <span class="block text-[10px] text-slate-500 uppercase">Dieta</span>
                            <span id="dino-diet" class="font-bold text-sm">---</span>
                        </div>
                        <div class="border border-blue-900/20 p-3 bg-black/20">
                            <span class="block text-[10px] text-slate-500 uppercase">Agressividade</span>
                            <span id="dino-threat" class="font-bold text-sm text-red-500">---</span>
                        </div>
                    </div>

                    <div class="flex-1">
                        <h4 class="text-blue-500 font-mono text-xs mb-2 uppercase italic">Relatório de Observação</h4>
                        <p id="dino-desc" class="text-slate-400 text-sm leading-relaxed mb-8">Carregando dados...</p>
                    </div>

                    <div class="mt-auto border-t border-blue-900/30 pt-8">
                        <div class="flex justify-between items-end mb-6">
                            <div>
                                <span class="block text-[10px] text-slate-500 font-mono">VALOR ATUAL DO LOTE</span>
                                <span id="dino-price" class="text-4xl font-black text-green-500">$ 0</span>
                            </div>
                            <div class="text-right">
                                <span id="auction-status" class="block text-[10px] text-red-500 font-bold animate-pulse uppercase">Leilão em tempo real</span>
                                <span id="timer" class="text-xs text-slate-400 font-mono">Expira em: 02:45:12</span>
                            </div>
                        </div>

                        <div class="flex gap-2">
                            <input type="text" id="bid-input" placeholder="Novo Lance (USD)" class="flex-1 bg-black/50 border border-blue-900/50 p-4 rounded text-white font-mono focus:outline-none focus:border-blue-500 transition-all">
                            <button onclick="fazerLance()" class="bg-blue-600 hover:bg-blue-500 text-white px-8 py-4 rounded font-black tracking-widest transition-all uppercase">
                                Enviar Lance
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        const dinosSpecs = {
            "trex": { dieta: "Carnívoro", threat: "Nível Máximo", stability: "98.4%", dna: "T-REX_GEN_98.4_ALPHA", tags: ["GIGANTE", "CARNIVORO"] },
            "raptor": { dieta: "Carnívoro (Social)", threat: "Nível Crítico", stability: "94.1%", dna: "V-RAPTOR_INTEL_MOD", tags: ["INTELIGENTE", "CARNIVORO"] },
            "indominus": { dieta: "Híbrido", threat: "Extremo", stability: "75%", dna: "I-REX_GEN_2", tags: ["HÍBRIDO", "CARNIVORO"] },
            "indoraptor": { dieta: "Híbrido", threat: "Extremo", stability: "60%", dna: "I-RAPTOR_V2", tags: ["HÍBRIDO", "CARNIVORO"] },
            "spino": { dieta: "Carnívoro", threat: "Nível Máximo", stability: "91%", dna: "SPINO_EGY_V3", tags: ["GIGANTE", "CARNIVORO"] },
            "mosasaurus": { dieta: "Aquático", threat: "Nível Máximo", stability: "99%", dna: "MOSA_V1_JW", tags: ["AQUÁTICO", "GIGANTE"] },
            "quetzal": { dieta: "Carnívoro", threat: "Nível Máximo", stability: "98%", dna: "QUETZ_DOM_V1", tags: ["VOADOR", "GIGANTE"] },
            "giga": { dieta: "Carnívoro", threat: "Nível Máximo", stability: "99%", dna: "GIGA_BS_GEN", tags: ["GIGANTE", "CARNIVORO"] },
            "scorpius": { dieta: "Híbrido", threat: "Extremo", stability: "40%", dna: "S-REX_E750", tags: ["HÍBRIDO", "CARNIVORO"] },
            "therizino": { dieta: "Herbívoro", threat: "Nível Crítico", stability: "98%", dna: "THERIZ_G_V1", tags: ["GARRAS", "HERBIVORO"] }
        };

        // Essa lista recupera as informações básicas (nome, img, desc) do que foi definido no leilao.html
        const listaInfoBase = [
            { id: 'trex', nome: 'Tyrannosaurus Rex', tag: '#001', img: 'https://github.com/Tatiana-adv/Biosny/blob/main/img/tiranossauro%20detalhes.jpg?raw=true', desc: 'O rei dos predadores. Força de mordida inigualável.' },
            { id: 'raptor', nome: 'Velociraptor', tag: '#002', img: 'https://github.com/Tatiana-adv/Biosny/blob/main/img/velo%20detalhes.jpg?raw=true', desc: 'Inteligência tática nível Alfa.' },
            { id: 'indominus', nome: 'Indominus Rex', tag: '#H-001', img: 'https://github.com/Tatiana-adv/Biosny/blob/main/img/indominus%20detalhes.jpg?raw=true', desc: 'Híbrido experimental. Camuflagem térmica.' },
            { id: 'indoraptor', nome: 'Indoraptor', tag: '#H-002', img: 'https://github.com/Tatiana-adv/Biosny/blob/main/img/indoraptor%20detalhes.jpg?raw=true', desc: 'Protótipo de arma biológica.' },
            { id: 'spino', nome: 'Spinosaurus', tag: '#003', img: 'https://github.com/Tatiana-adv/Biosny/blob/main/img/espinossauro%20detalhes.jpg?raw=true', desc: 'O maior carnívoro terrestre registrado.' },
            { id: 'mosasaurus', nome: 'Mosasaurus', tag: '#A-001', img: 'https://github.com/Tatiana-adv/Biosny/blob/main/img/mosa%20detalhes.jpg?raw=true', desc: 'Gigante oceânico.' },
            { id: 'quetzal', nome: 'Quetzalcoatlus', tag: '#V-001', img: 'https://github.com/Tatiana-adv/Biosny/blob/main/img/quatzal%20detalhes.jpg?raw=true', desc: 'Maior animal voador da história.' },
            { id: 'giga', nome: 'Giganotosaurus', tag: '#004', img: 'https://github.com/Tatiana-adv/Biosny/blob/main/img/giga%20detalhes.jpg?raw=true', desc: 'Predador massivo. Supera o T-Rex.' },
            { id: 'scorpius', nome: 'Scorpius Rex', tag: '#H-003', img: 'https://github.com/Tatiana-adv/Biosny/blob/main/img/scorp%20detalhes.jpg?raw=true', desc: 'O primeiro híbrido instável.' },
            { id: 'therizino', nome: 'Therizinosaurus', tag: '#022', img: 'https://github.com/Tatiana-adv/Biosny/blob/main/img/theri%20datlhes.jpg?raw=true', desc: 'Herbívoro territorial. Garras de 1 metro.' }
        ];

        let dinoAtualId = localStorage.getItem('selectedDino');
        let precosGlobais = JSON.parse(localStorage.getItem('precosDinos'));
        let saldoUser = parseInt(localStorage.getItem('userBalance'));

        window.onload = function() {
            const base = listaInfoBase.find(d => d.id === dinoAtualId);
            const specs = dinosSpecs[dinoAtualId];

            if (base && specs) {
                document.getElementById('dino-name').innerText = base.nome;
                document.getElementById('dino-code').innerText = base.tag;
                document.getElementById('dino-img').src = base.img;
                document.getElementById('dino-desc').innerText = base.desc;
                
                // O VALOR VEM DOS PREÇOS QUE O BOT ALTEROU
                document.getElementById('dino-price').innerText = "$ " + precosGlobais[dinoAtualId].toLocaleString('de-DE');
                
                document.getElementById('dino-diet').innerText = specs.dieta;
                document.getElementById('dino-threat').innerText = specs.threat;
                document.getElementById('dino-dna').innerText = specs.dna;
                document.getElementById('dino-stability').innerText = specs.stability;
                document.getElementById('dna-bar').style.width = specs.stability;
                document.getElementById('user-balance').innerText = "$ " + saldoUser.toLocaleString('de-DE');

                renderTags(specs.tags);
                startTimer();
            }
            
            // Máscara de input
            document.getElementById('bid-input').addEventListener('input', function(e) {
                let v = e.target.value.replace(/\D/g, "");
                e.target.value = v ? parseInt(v).toLocaleString('de-DE') : "";
            });
        };

        function renderTags(tags) {
            const container = document.getElementById('dino-tags');
            tags.forEach(t => {
                const s = document.createElement('span');
                s.className = "bg-blue-900/30 text-blue-400 text-[10px] px-2 py-1 border border-blue-500/30 rounded font-bold uppercase";
                s.innerText = t;
                container.appendChild(s);
            });
        }

        function fazerLance() {
            const val = parseInt(document.getElementById('bid-input').value.replace(/\D/g, ""));
            const precoAgora = precosGlobais[dinoAtualId];

            if (val > saldoUser) {
                alert("SALDO INSUFICIENTE!");
                return;
            }
            if (val <= precoAgora) {
                alert("O lance deve ser maior que o atual!");
                return;
            }

            // Atualiza preço
            precosGlobais[dinoAtualId] = val;
            localStorage.setItem('precosDinos', JSON.stringify(precosGlobais));
            document.getElementById('dino-price').innerText = "$ " + val.toLocaleString('de-DE');
            alert("LANCE REGISTRADO!");
        }

        function startTimer() {
            let tempo = 9912;
            setInterval(() => {
                tempo--;
                let h = Math.floor(tempo / 3600);
                let m = Math.floor((tempo % 3600) / 60);
                let s = tempo % 60;
                document.getElementById('timer').innerText = `Expira em: ${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            }, 1000);
        }
    </script>
</body>
</html>
